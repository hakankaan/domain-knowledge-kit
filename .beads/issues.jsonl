{"id":"domain-knowledge-kit-hin","title":"Bootstrap Domain Knowledge Pack (YAML + ADR links + deterministic search + generated docs)","description":"Problem/goal: Establish a repo-native, Event-Storming-first domain knowledge system where structured domain items in-repo (YAML) are the canonical source of truth, with deterministic retrieval for Copilot workflows. Scope (in): Canonical domain item model (events/commands/policies/aggregates/read models/actors/glossary/contexts), generated Markdown docs derived from the model (.gitignored, on demand), ADR format and bidirectional linking, TypeScript/Node.js CLI with SQLite FTS5 for validate/render/search/show/related. Copilot integration via copilot-instructions.md + prompt workflows + optional Agent Skill. No custom agent. Scope (out): API contracts/specs, dev env docs, CI enforcement, implementation topology, custom Copilot agent files, sample data. Decisions: TS/Node CLI, SQLite FTS5 from v1, generated docs .gitignored, no sample data, no custom agent. Decomposed into child issues.","notes":"Acceptance Criteria:\\n- Canonical domain items exist as structured, stable-ID domain artifacts with bounded-context scoping (events/commands/policies/aggregates/read models/actors/glossary/contexts).\\n- ADRs support frontmatter domain references and resolve bidirectionally with domain item ADR references (no dangling refs).\\n- Local CLI supports: validate (IDs/refs), render (deterministic docs), search (deterministic lexical + metadata), show, and related (graph expansion).\\n- Generated docs are reproducible from the canonical model and templates, producing consistent output under docs/domain/.\\n- Copilot artifacts exist to enforce domain-first retrieval and canonical model updates when domain behavior changes.\\n- Retrieval introduces no embeddings, vector DB, or semantic dependency.\\n\\nOpen questions / assumptions:\\n- Preferred CLI language/runtime (Node/TS vs Python vs Go).\\n- Whether to include SQLite FTS5 indexing in v1 vs defer.\\n- Whether generated docs are committed by default.","status":"open","priority":2,"issue_type":"epic","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T12:43:48.138014+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:37:57.997587+03:00"}
{"id":"domain-knowledge-kit-hin.1","title":"Project infrastructure: package.json, tsconfig, deps, .gitignore","description":"Initialize Node.js project at repo root: package.json (type: module), tsconfig.json (ES2022/Node18+, output dist/), dev deps (typescript, tsx, better-sqlite3, js-yaml, ajv, handlebars, commander, fast-glob), root .gitignore (node_modules/, dist/, docs/domain/, .domain-pack/), bin entry for dist/cli.js, scripts for build and dev.","status":"closed","priority":1,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:18.282814+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:49:53.105263+03:00","closed_at":"2026-02-20T13:49:53.105263+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.1","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:18.283928+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.10","title":"CLI wiring: Commander-based entry point","description":"Implement src/cli.ts and src/commands/*.ts: wire all commands via Commander. Commands: domain list [--context][--type] (filter+table), domain show \u003cid\u003e (full YAML), domain search \u003cquery\u003e [--context][--type][--tag] (FTS5+ranked), domain related \u003cid\u003e [--depth] (graph traversal), domain validate (schema+xref, exit code), domain render (validate+render+count), domain adr show \u003cadr-id\u003e (print ADR), domain adr related \u003cid\u003e (bidirectional domain-ADR links). Each command in its own file under src/commands/.","status":"open","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:22.756822+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:39:22.756822+03:00","dependencies":[{"issue_id":"domain-knowledge-kit-hin.10","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:22.758036+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.10","depends_on_id":"domain-knowledge-kit-hin.6","type":"blocks","created_at":"2026-02-20T13:40:34.948512+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.10","depends_on_id":"domain-knowledge-kit-hin.8","type":"blocks","created_at":"2026-02-20T13:40:38.239253+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.10","depends_on_id":"domain-knowledge-kit-hin.9","type":"blocks","created_at":"2026-02-20T13:40:41.491585+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.11","title":"Copilot integration: instructions + prompts + skill","description":"Create Copilot artifacts (no custom agent file). 1) .github/copilot-instructions.md: core rules for domain-first retrieval, prefer YAML edits, update invariants/ADRs, run domain render. 2) .github/prompts/domain_search.prompt.md: user request -\u003e domain search -\u003e relevant IDs + excerpts + ADRs. 3) .github/prompts/domain_change_review.prompt.md: change summary -\u003e impacted items + invariants + ADRs. 4) .github/prompts/domain_update.prompt.md: change intent -\u003e YAML patches + ADR suggestions + render. 5) .github/skills/domain-knowledge/skill.md: portable Agent Skill describing canonical model, retrieval, update rules.","status":"open","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:31.680192+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:39:31.680192+03:00","dependencies":[{"issue_id":"domain-knowledge-kit-hin.11","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:31.681027+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.12","title":"README.md + AGENTS.md update","description":"Create README.md at repo root: what the package is, quick start (npm install, npx domain validate, npx domain render), directory layout reference, how to add a bounded context, how to add an ADR and link it, CLI command reference, link to Copilot integration. Update AGENTS.md: document domain CLI commands available to agents, convention that domain YAML is source of truth, instruction to run domain validate + domain render as quality gates when domain files change.","status":"open","priority":3,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:38.87411+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:39:38.87411+03:00","dependencies":[{"issue_id":"domain-knowledge-kit-hin.12","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:38.874846+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.12","depends_on_id":"domain-knowledge-kit-hin.10","type":"blocks","created_at":"2026-02-20T13:40:44.910702+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.13","title":"Verification: build + validate + render + search on empty scaffolding","description":"End-to-end verification: npm run build compiles without errors, npx domain validate exits 0 on empty scaffolding, npx domain render generates docs/domain/index.md (empty contexts), npx domain search anything returns 0 results gracefully, .gitignore correctly excludes docs/domain/ + .domain-pack/ + node_modules/ + dist/. All Copilot artifacts (copilot-instructions.md, 3 prompts, skill) are present and well-formed.","status":"open","priority":3,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:45.972315+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:39:45.972315+03:00","dependencies":[{"issue_id":"domain-knowledge-kit-hin.13","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:45.973602+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.13","depends_on_id":"domain-knowledge-kit-hin.10","type":"blocks","created_at":"2026-02-20T13:40:48.262415+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.13","depends_on_id":"domain-knowledge-kit-hin.11","type":"blocks","created_at":"2026-02-20T13:40:51.550216+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.2","title":"Directory scaffolding: domain/, docs/, tools/","description":"Create canonical directory structure: domain/contexts/ (.gitkeep), domain/actors.yml (actors: []), domain/index.yml (contexts: [], flows: []), docs/adr/ (.gitkeep + README.md explaining ADR format), docs/domain/ (.gitignored, generated), .github/prompts/, .github/skills/domain-knowledge/, tools/domain-pack/schema/, tools/domain-pack/templates/. Keep existing .github/agents/ untouched.","status":"closed","priority":1,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:25.236861+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:57:13.206407+03:00","closed_at":"2026-02-20T13:57:13.206407+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.2","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:25.237975+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.2","depends_on_id":"domain-knowledge-kit-hin.1","type":"blocks","created_at":"2026-02-20T13:39:51.025394+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.3","title":"JSON Schemas for YAML validation","description":"Create JSON Schema files in tools/domain-pack/schema/: context.schema.json, glossary.schema.json, actors.schema.json, event.schema.json, command.schema.json, policy.schema.json, aggregate.schema.json, read-model.schema.json, adr-frontmatter.schema.json, index.schema.json. Enforce stable id format (context.name for domain items, adr-NNN for ADRs), required fields per proposal section 4.","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:31.704138+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T14:27:39.561297+03:00","closed_at":"2026-02-20T14:27:39.561297+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.3","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:31.705473+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.3","depends_on_id":"domain-knowledge-kit-hin.2","type":"blocks","created_at":"2026-02-20T13:39:58.719264+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.4","title":"TypeScript types and interfaces","description":"Create src/types/domain.ts with TypeScript interfaces for all domain item types: DomainContext, GlossaryEntry, Actor, DomainEvent, Command, Policy, Aggregate, ReadModel, AdrRecord, DomainModel (container). Create src/types/index.ts with SearchIndexRecord type. All types must align with the JSON Schemas from step 3.","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:37.071542+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T14:32:06.496148+03:00","closed_at":"2026-02-20T14:32:06.496148+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.4","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:37.072297+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.4","depends_on_id":"domain-knowledge-kit-hin.2","type":"blocks","created_at":"2026-02-20T13:39:58.807446+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.5","title":"Core: Loader (YAML + ADR parser)","description":"Implement src/core/loader.ts: recursively walk domain/contexts/*/ to discover context dirs, parse context.yml, glossary.yml, event/command/policy/aggregate/read-model YAML files. Parse root actors.yml and index.yml. Implement src/utils/adr-parser.ts: parse docs/adr/*.md frontmatter (YAML between --- markers) for ADR records. Return typed DomainModel object with all items keyed by ID. Also create src/utils/paths.ts (repo-relative path resolution) and src/utils/yaml.ts (YAML parse/stringify helpers).","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:44.644596+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T14:43:23.07906+03:00","closed_at":"2026-02-20T14:43:23.07906+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.5","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:44.6455+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.5","depends_on_id":"domain-knowledge-kit-hin.3","type":"blocks","created_at":"2026-02-20T13:40:14.831973+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.5","depends_on_id":"domain-knowledge-kit-hin.4","type":"blocks","created_at":"2026-02-20T13:40:18.086415+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.6","title":"Core: Validator (schema + cross-ref)","description":"Implement src/core/validator.ts: validate each YAML file against its JSON Schema (via ajv), ensure all IDs globally unique, all context references valid, all related/produces/handles/emits references resolve, all decisions references (adr-NNN) resolve to ADR files, all ADR domainRefs resolve to domain items. Configurable warning for events/commands without examples. Output: errors (blocking, exit 1) and warnings (non-blocking).","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:51.197978+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T15:04:37.824697+03:00","closed_at":"2026-02-20T15:04:37.824697+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.6","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:51.198969+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.6","depends_on_id":"domain-knowledge-kit-hin.5","type":"blocks","created_at":"2026-02-20T13:40:21.277835+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.7","title":"Core: Domain graph (adjacency list)","description":"Implement src/core/graph.ts: build an adjacency-list graph from DomainModel. Nodes = any domain item (event, command, policy, aggregate, read-model, actor, ADR). Edges from related, produces, handles, emits, derivedFrom, when/then (policies), decisions/domainRefs. Expose getRelated(id, depth) returning set of related item IDs at given traversal depth. Used by search (graph expansion) and domain related command.","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:38:57.873094+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T15:11:32.577643+03:00","closed_at":"2026-02-20T15:11:32.577643+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.7","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:38:57.874207+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.7","depends_on_id":"domain-knowledge-kit-hin.5","type":"blocks","created_at":"2026-02-20T13:40:24.793665+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.8","title":"Core: SQLite FTS5 indexer + searcher","description":"Implement src/core/indexer.ts: create/rebuild SQLite DB at .domain-pack/index.db with FTS5 virtual table domain_fts(id, type, context, name, tags, text, relations, adrRefs). Text column = concatenation of description, when/intent, invariants, examples, glossary terms+synonyms. Idempotent rebuild. Implement src/core/searcher.ts: accept query + optional filters (context, type, tag), FTS5 MATCH query, boost scoring (exact ID, name, tag, glossary), post-FTS filters, graph expansion for top-N results, include linked ADRs. Return ranked list of {id, type, context, name, excerpt, score, relatedIds, adrIds}.","status":"closed","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:07.439413+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T15:17:04.49546+03:00","closed_at":"2026-02-20T15:17:04.49546+03:00","close_reason":"Closed","dependencies":[{"issue_id":"domain-knowledge-kit-hin.8","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:07.440333+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.8","depends_on_id":"domain-knowledge-kit-hin.7","type":"blocks","created_at":"2026-02-20T13:40:28.034717+03:00","created_by":"Kaan Akın"}]}
{"id":"domain-knowledge-kit-hin.9","title":"Core: Renderer (Handlebars templates)","description":"Implement src/core/renderer.ts: load Handlebars templates from tools/domain-pack/templates/, render to docs/domain/. Create templates: index.md.hbs (top-level domain index with contexts, glossary index, key flows), context.md.hbs (per-context: overview, glossary, events, commands, policies, aggregates, read-models, linked ADRs), item.md.hbs (per-item: summary, meaning, rules/invariants, examples, relationships, ADRs). Ensure output dirs exist, write files, report count.","status":"open","priority":2,"issue_type":"task","owner":"kaanhakan2005@gmail.com","created_at":"2026-02-20T13:39:15.188891+03:00","created_by":"Kaan Akın","updated_at":"2026-02-20T13:39:15.188891+03:00","dependencies":[{"issue_id":"domain-knowledge-kit-hin.9","depends_on_id":"domain-knowledge-kit-hin","type":"parent-child","created_at":"2026-02-20T13:39:15.189729+03:00","created_by":"Kaan Akın"},{"issue_id":"domain-knowledge-kit-hin.9","depends_on_id":"domain-knowledge-kit-hin.5","type":"blocks","created_at":"2026-02-20T13:40:31.452387+03:00","created_by":"Kaan Akın"}]}
